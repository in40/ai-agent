# MCP Search Server

The MCP Search Server is an MCP-compliant service that enables LLM models to perform web search queries via the Brave Search API. This server follows the same patterns as the existing DNS resolution server, providing a consistent interface for external services.

## Purpose

The MCP Search Server allows LLM models to perform web searches when they need current information that isn't available in the connected databases. This is particularly useful for:

- Current events and news
- Real-time data and statistics
- General knowledge queries
- Fact checking

## Architecture

The server follows the same architecture as the DNS server:

- Implements an HTTP server with custom request handlers
- Registers itself with the MCP service registry
- Maintains heartbeats to stay registered
- Provides a clean API for search queries

## Configuration

The server can be configured with the following command-line parameters:

```
--host HOST           Host to bind to (default: 127.0.0.1)
--port PORT           Port to bind to (default: 8090)
--registry-url REGISTRY_URL
                      Service registry URL (default: http://127.0.0.1:8080)
--service-id SERVICE_ID
                      Service ID for registry (auto-generated by default)
--service-ttl SERVICE_TTL
                      Service TTL in seconds (default: 60)
--log-level {DEBUG,INFO,WARNING,ERROR}
                      Logging level (default: INFO)
```

## Environment Variables

The server requires the following environment variable to be set:

- `BRAVE_SEARCH_API_KEY`: Your Brave Search API key (available from https://brave.com/search/api/)

## Usage

### Starting the Server

```bash
export BRAVE_SEARCH_API_KEY=your_brave_search_api_key
python mcp_search_server.py --host 127.0.0.1 --port 8090 --registry-url http://127.0.0.1:8080
```

### Making Search Requests

Once the server is running and registered with the MCP service registry, LLM models can make search requests through the MCP framework. The server will:

1. Receive a search query from the MCP framework
2. Call the Brave Search API with the provided query
3. Format the results and return them to the requesting service

## API Response Format

The server returns search results in the following format:

```json
{
  "success": true,
  "result": {
    "success": true,
    "query": "search query",
    "results": [
      {
        "title": "Result title",
        "url": "https://example.com",
        "description": "Result description",
        "date": "2023-01-01",
        "language": "en",
        "thumbnail": "https://example.com/thumbnail.jpg"
      }
    ],
    "error": null
  }
}
```

## Integration with MCP Framework

The search server integrates with the MCP framework by:

1. Registering itself with the service registry as type `mcp_search`
2. Advertising its capabilities as a `search_engine` with `web_search` and `brave_search` capabilities
3. Providing a standardized interface for search queries
4. Handling errors gracefully and returning appropriate responses

## Security Considerations

- The server validates incoming requests and handles errors appropriately
- API keys are loaded from environment variables rather than hardcoded
- The server implements proper request/response handling with error responses